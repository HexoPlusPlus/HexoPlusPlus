<div id="log"></div>

<div class="mdui-textfield mdui-textfield-floating-label">
    <label class="mdui-textfield-label">输入你的GithubToken，享受解放双手的乐趣！</label>
    <input class="mdui-textfield-input" type="password" id="gh_token" />
</div>

<button class="mdui-btn mdui-ripple" onclick="start()">检测Token有效性</button>


<script>
    (async () => {
        const setlog = document.getElementById("log")
        try {
            window.start = () => {
                const ghtoken = document.getElementById("gh_token").value
                const ghtoken_info = (await(await fetch(`https://${document.location.host}/hpp/admin/install?step=test&type=ghtoken&token=${ghtoken}&s=${(new Date()).valueOf()}`)).json()).ctx
                const ghtoken_flag = ghtoken_info.success
            }
        } catch (o) {
            setlog.innerText += "[异常]安装程序意外退出：\n" + o
        }
    })()
</script>