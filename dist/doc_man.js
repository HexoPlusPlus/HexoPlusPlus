function round(t,n){return Math.round(+t+"e"+n)/Math.pow(10,n)}let docsize=0,hpp_arr_githubdocpath=hpp_githubdocpath.substr(1,hpp_githubdocpath.length-1),hpp_arr_draft_githubdocpath=hpp_githubdocdraftpath.substr(1,hpp_githubdocdraftpath.length-1);var ctJson="/hpp/admin/api/getlist";function start_limit(){var t=$("table"),n=0,e=hpp_page_limit;t.bind("paging",(function(){t.find("tbody tr").hide().slice(n*e,(n+1)*e).show()}));for(var a=t.find("tbody tr").length,d=Math.ceil(a/e),o=$('<div class="page" style="text-align:center;"></div>'),i=0;i<d;i++)$('<a href="#" id="pageStyle" onclick="changCss(this)"><span>'+(i+1)+"</span></a>").bind("click",{newPage:i},(function(e){n=e.data.newPage,t.trigger("paging")})).appendTo(o),o.append(" ");o.insertAfter(t),t.trigger("paging");var r=$("#pageStyle");r[0].style.backgroundColor="#ccc",r[0].style.color="#ffffff"}function changCss(t){for(var n=document.getElementsByTagName("a"),e=0;e<n.length;e++)t==n[e]?(t.style.backgroundColor="#ccc",t.style.color="#ffffff"):(n[e].style.color="",n[e].style.backgroundColor="")}function del(t){swal({title:"确定！",text:`你将要删除${t}，真的这么做么？`,icon:"warning",buttons:!0,dangerMode:!0}).then((n=>{n?delfile(t):swal("好的，当前文件没有被删除",{icon:"success"})}))}function delfile(t){swal({title:"\n删除中...",icon:"https://cdn.jsdelivr.net/gh/HexoPlusPlus/CDN@db63c79/loading.gif",text:"\n",button:!1,closeModal:!1});var n=ajaxObject();n.open("GET","/hpp/admin/api/deldoc/"+t,!0),n.setRequestHeader("Content-Type","text/plain"),n.onreadystatechange=function(){4==n.readyState&&(200==n.status?(swal.close(),swal("已删除！","",{icon:"success",buttons:{yes:"是"}}).then((t=>{window.location.reload()}))):(swal.close(),swal({title:"失败！",text:"文件删除失败，请确定您是否有权限删除，或者该文件是否存在",icon:"warning"})))},n.send((new Date).getTime())}function del_dr(t){swal({title:"确定！",text:`你将要删除${t}，真的这么做么？`,icon:"warning",buttons:!0,dangerMode:!0}).then((n=>{n?deldraft(t):swal("好的，当前文件没有被删除",{icon:"success"})}))}function deldraft(t){swal({title:"\n删除中...",icon:"https://cdn.jsdelivr.net/gh/HexoPlusPlus/CDN@db63c79/loading.gif",text:"\n",button:!1,closeModal:!1});var n=ajaxObject();n.open("GET","/hpp/admin/api/deldraft/"+t,!0),n.setRequestHeader("Content-Type","text/plain"),n.onreadystatechange=function(){4==n.readyState&&(200==n.status?(swal.close(),swal("已删除！","",{icon:"success",buttons:{yes:"是"}}).then((t=>{window.location.reload()}))):(swal.close(),swal({title:"失败！",text:"文件删除失败，请确定您是否有权限删除，或者该文件是否存在",icon:"warning"})))},n.send((new Date).getTime())}$.getJSON(ctJson,(function(t){document.getElementById("tbody_doc").innerHTML="",$.each(t,(function(t,n){docsize=round(n.size/1024,2),arr_path=n.path.split(hpp_arr_githubdocpath)[1],$("#tbody_doc").append(`\n\t\t\t\t<tr>\n                          <td>\n                           ${arr_path}\n                          </td>\n                          <td>\n                            ${docsize}KB\n                          </td>\n\t\t\t\t\t\t  <td>\n                            已发布\n                          </td>\n                          <td>\n                            <a href="https://cdn.jsdelivr.net/gh/${hpp_githubdocusername}/${hpp_githubdocrepo}@${hpp_githubdocbranch}/${n.path}">CDN链接</a>\n                          </td>\n                          <td>\n                            <a href="javascript:del('${arr_path}');">删除</a>\n                          </td>\n\t\t\t\t\t\t  <td>\n                            <a href="${n.download_url}">原始地址</a>\n                          </td>\n\t\t\t\t\t\t  <td>\n                            <a href="${n.html_url}">Github地址</a>\n                          </td>\n                        </tr>\n                `)}));$.getJSON("/hpp/admin/api/get_draftlist",(function(t){$.each(t,(function(t,n){docsize=round(n.size/1024,2),arr_path=n.path.split(hpp_arr_draft_githubdocpath)[1],$("#tbody_doc").append(`\n\t\t\t\t<tr>\n                          <td>\n                           ${arr_path}\n                          </td>\n                          <td>\n                            ${docsize}KB\n                          </td>\n\t\t\t\t\t\t  <td>\n                            未发布\n                          </td>\n                          <td>\n                            <a href="https://cdn.jsdelivr.net/gh/${hpp_githubdocusername}/${hpp_githubdocrepo}@${hpp_githubdocbranch}/${n.path}">CDN链接</a>\n                          </td>\n                          <td>\n                            <a href="javascript:del_dr('${arr_path}');">删除</a>\n                          </td>\n\t\t\t\t\t\t  <td>\n                            <a href="${n.download_url}">原始地址</a>\n                          </td>\n\t\t\t\t\t\t  <td>\n                            <a href="${n.html_url}">Github地址</a>\n                          </td>\n                        </tr>\n                `)})),start_limit()}))}));